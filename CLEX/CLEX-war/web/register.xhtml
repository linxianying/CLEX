<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <f:facet name="first">
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
            <meta name="apple-mobile-web-app-capable" content="yes" />
        </f:facet>
        <title>PRISM Register Page</title>
        <!-- FAVICON -->
        <link rel="icon" 
              type="image/png" 
              href="https://i.imgur.com/SN8wqcu.png" />
    </h:head>
    <h:body styleClass="login-body" > <!--ondblclick="closeDialog();"-->
        <div class="login-panel ui-fluid">
            <h:form id="registerForm">
                <p:focus context="panel"/>
                <div class="ui-g">
                    <p:panel id="panel" style="border: none">
                        <div class="ui-g-12 logo-container">
                            <p:graphicImage name="images/login/login-prism-logo.png" library="poseidon-layout" />
                        </div>
                        <div class="ui-g-12">
                            <!-- Full Name -->
                            <p:inputText styleClass="textInput" 
                                         title="Please enter your full name"
                                         placeholder="Full Name"
                                         id="name" value="#{registerBean.name}" 
                                         required="true" 
                                         requiredMessage="Full Name Required." >
                            </p:inputText> 
                        </div>
                        <!--<p:message for="name" />-->

                        <!-- Email Address -->
                        <div class="ui-g-12">
                            <p:inputText styleClass="textInput" 
                                         placeholder="Email Address" 
                                         title="Please enter your email address"
                                         id="email" value="#{registerBean.email}" required="true" 
                                         requiredMessage="Email Required."                                     
                                         validatorMessage="Email format is invalid.">
                            </p:inputText>
                        </div>
                        <!--<p:message for="email" />-->

                        <!-- Contact Number -->
                        <div class="ui-g-12">

                            <p:inputText styleClass="textInput" 
                                         title="Please enter your contact number"
                                         placeholder="Contact Number"
                                         id="contact" value="#{registerBean.contactNum}" 
                                         required="true" requiredMessage="Contact Number Required." 
                                         validatorMessage="Invalid format. Contact number must be at least 8 digits">
                            </p:inputText>

                        </div>
                        <!--<p:message for="contact" />-->

                        <!-- School --> 
                        <div class="ui-g-12">
                            <p:selectOneMenu style="padding: 0%; text-transform: uppercase;" 
                                             required="true" title="Select your school from the list. If your school isn't available, send a request to your instituition to adopt PRISM."
                                             id="school" value="#{registerBean.school}" 
                                             placeholder="School" requiredMessage="School Required">
                                 <p:ajax listener="#{registerBean.onSchoolChange(registerBean.school)}" update="registerForm:yearsemgroup" />
                                <f:selectItems value="#{registerBean.schoollist}" />
                            </p:selectOneMenu>
                            <p:tooltip id="toolTipFocus" for="school" showEvent="focus" hideEvent="blur" />
                        </div>
                        <!-- <p:message for="school" />   -->                     
                        <!-- User Type -->
                        <div class="ui-g-12 chkbox-container">
                            <p:selectOneButton required="true" requiredMessage="User Type Required" styleClass="menuSelect" id="userType" value="#{registerBean.userType}">
                                <p:ajax event="change" update="registerForm:yearsemgroup" />
                                <f:selectItem itemValue="1" itemLabel="STU" />
                                <f:selectItem itemValue="2" itemLabel="LEC" />
                                <f:selectItem itemValue="3" itemLabel="GUE" />
                            </p:selectOneButton>
                        </div>
                        <!--<p:message for="userType" />-->
                        <h:panelGroup id="yearsemgroup">
                            <p:selectOneMenu style="padding: 0%" 
                                             required="true" rendered="#{registerBean.userType == '1'}"
                                             id="matricYear" value="#{registerBean.matricYear}" 
                                             placeholder="School" requiredMessage="Matriculated Year Required">
                                <f:selectItem itemValue="" itemLabel="Matriculated Year" noSelectionOption="true"/>
                                <f:selectItems value="#{registerBean.yearlist}" />
                            </p:selectOneMenu>
                            <p:selectOneButton required="true" rendered="#{registerBean.userType == '1'}"
                                               requiredMessage="Matriculated Semester Required" 
                                               styleClass="menuSelect" id="matricSem" value="#{registerBean.matricSem}">
                                <f:selectItem itemValue="1" itemLabel="SEM 1" />
                                <f:selectItem itemValue="2" itemLabel="SEM 2" />
                            </p:selectOneButton>
                            <p:selectOneMenu style="padding: 0%" 
                                             required="true" rendered="#{registerBean.userType == '1'}"
                                             id="facultylist" value="#{registerBean.faculty}" 
                                             placeholder="School" requiredMessage="Faculty Required">
                                <f:selectItem itemValue="" itemLabel="Faculty" noSelectionOption="true"/>
                                <f:selectItems value="#{registerBean.facultylist}" />
                            </p:selectOneMenu>
                            <p:inputText styleClass="textInput" rendered="#{registerBean.userType == '1'}"
                                         placeholder="Major"
                                         title="Information Systems, Applied Mathematics etc."
                                         id="major" value="#{registerBean.major}" 
                                         required="true" requiredMessage="Major Required." />
                        </h:panelGroup>


                        <!-- Username -->
                        <div class="ui-g-12">

                            <p:inputText styleClass="textInput" title="6-12 alphanumeric without special characters"
                                         placeholder="Username"
                                         id="username" value="#{registerBean.username}" 
                                         required="true" requiredMessage="Username Required." 
                                         validatorMessage="Invalid format. Username must be between 6-12 letters/numbers. Special characters are not allowed.">
                                <f:validateRegex pattern="^[a-zA-Z0-9]{6,12}$" /> 
                            </p:inputText>
                        </div>
                        <!-- <p:message for="username" />-->

                        <!-- Password -->
                        <div class="ui-g-12">

                            <p:password styleClass="textInput" 
                                        placeholder="Password"
                                        title="6-12 characters"
                                        id="password" value="#{registerBean.password}" 
                                        feedback="true"
                                        match="password1"
                                        validatorMessage="Invalid format or inconsistent passwords. Please enter again."
                                        required="true" requiredMessage="Password Required." />

                        </div>
                        <p:message for="password"/>

                        <!-- Confirm Password -->
                        <div class="ui-g-12">

                            <p:password styleClass="textInput" 
                                        placeholder="Confirm Password"
                                        title="Enter your password again"
                                        id="password1" value="#{registerBean.password1}" 
                                        feedback="true"
                                        promptLabel="Ensure both passwords are the same"
                                        validatorMessage="Passwords are inconsistent. Please enter again."
                                        required="true" requiredMessage="Password required and must match." />

                        </div>
                        <p:message for="password1" />

                        <!--<p:confirmDialog style="max-width: 40%; max-height:50%; overflow:auto"  
                                         widgetVar="termsdlg" global="true" showEffect="fade" hideEffect="fade" >
                           
                        </p:confirmDialog>-->
                        <!-- T&C -->
                        <div class="ui-g-12">
                            <p:lightBox >
                                <p:commandButton styleClass="termsBtn" ajax="false" value="Read Terms &amp; Conditions">
                                    <p:confirm  message="Terms &amp; Conditions" icon="ui-icon-alert" />
                                </p:commandButton>
                                <f:facet name="inline">
                                    <p:fieldset toggleable="false" collapsed="false" legend="Terms &amp; Conditions" style="width: 800px">
                                        <h:panelGroup>
                                            <h:outputText value="1. Terms:"/>
                                            <br/>
                                            <h:outputText value="By accessing the website, you are agreeing to be bound by these terms of service, all applicable laws and regulations, and agree that you are responsible for compliance with any applicable local laws. If you do not agree with any of these terms, you are prohibited from using or accessing this site. The materials contained in this website are protected by applicable copyright and trademark law." />
                                            <br/><br/>
                                            <h:outputText value="2. Disclaimer:"/>
                                            <br/>
                                            <h:outputText value="The materials on PRISM's website are provided on an 'as is' basis. PRISM makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."/>
                                            <br/><br/>
                                            <h:outputText value="3. Limitations"/>
                                            <br/>
                                            <h:outputText value="In no event shall PRISM or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on PRISM's website, even if PRISM or a PRISM authorized representative has been notified orally or in writing of the possibility of such damage. Because some jurisdictions do not allow limitations on implied warranties, or limitations of liability for consequential or incidental damages, these limitations may not apply to you."/>
                                            <br/><br/>
                                            <h:outputText value="4. Modifications"/>
                                            <br/>
                                            <h:outputText value="PRISM may revise these terms of service for its website at any time without notice. By using this website you are agreeing to be bound by the then current version of these terms of service."/>
                                            <br/><br/>
                                            <h:outputText value="5. Governing Law"/>
                                            <br/>
                                            <h:outputText value="These terms and conditions are governed by and construed in accordance with the laws of Singapore and you irrevocably submit to the exclusive jurisdiction of the courts in that State or location."/>
                                        </h:panelGroup>
                                    </p:fieldset>
                                </f:facet>
                            </p:lightBox>

                            <h:panelGrid styleClass="form-title-row" columns="2" style="margin: auto">
                                <h:outputText value="I agree to the terms &amp; conditions"></h:outputText>
                                <p:selectBooleanCheckbox value="#{registerBean.agree}" id="terms" required="true" requiredMessage="You must agree to our Terms &amp; Conditions" >
                                </p:selectBooleanCheckbox>
                            </h:panelGrid>

                            <p:message for="terms"/>
                        </div>

                        <div class="ui-g-12 button-container">
                            <p:commandButton styleClass="pink-btn" icon="fa fa-user" update="@form" value="Sign Up" actionListener="#{registerBean.register}" action="login?faces-redirect=true" />
                        </div>
                    </p:panel>
                </div>
            </h:form>
        </div>

        <h:outputStylesheet name="css/layout-#{guestPreferences.theme}.css" library="poseidon-layout" />
    </h:body>
    <!--<script>
        function closeDialog() {
            PF('termsdlg').hide();
        }
    </script>-->
</html>

