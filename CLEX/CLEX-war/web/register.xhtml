<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <f:facet name="first">
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
            <meta name="apple-mobile-web-app-capable" content="yes" />
        </f:facet>
        <title>PRISM Register Page</title>
        
        <!-- TEST FAVICON -->
        <link rel="icon" 
              type="image/png" 
              href="https://cdn4.iconfinder.com/data/icons/new-google-logo-2015/400/new-google-favicon-128.png" />
    </h:head>

    <h:body styleClass="login-body">
        <div class="login-panel ui-fluid">

            <h:form>
                <!--<p:messages showDetail="false" autoUpdate="true" closable="true" />-->
                <div class="ui-g">
                    <div class="ui-g-12 logo-container">
                        <p:graphicImage name="images/login/login-logo.png" library="poseidon-layout" />
                    </div>
                    <!-- Full Name -->
                    <div class="ui-g-12">
                        <label>
                            <p:inputText styleClass="textInput" 
                                         title="Please enter your full name"
                                         placeholder="Full Name"
                                         id="name" value="#{registerBean.name}" 
                                         required="true" 
                                         requiredMessage="Full Name Required." >
                            </p:inputText> 
                        </label>
                    </div>
                    <p:message for="name" />

                    <!-- Email Address -->
                    <div class="ui-g-12">
                        <label>
                            <p:inputText styleClass="textInput" 
                                         placeholder="Email Address" 
                                         title="Please enter your email address"
                                         id="email" value="#{registerBean.email}" required="true" 
                                         requiredMessage="Email Required."                                     
                                         validatorMessage="Email format is invalid.">
                            </p:inputText>
                        </label>
                    </div>
                    <p:message for="email" />

                    <!-- Contact Number -->
                    <div class="ui-g-12">
                        <label>
                            <p:inputText styleClass="textInput" 
                                         title="Please enter your contact number"
                                         placeholder="Contact Number"
                                         id="contact" value="#{registerBean.contactNum}" 
                                         required="true" requiredMessage="Contact Number Required." 
                                         validatorMessage="Invalid format. Contact number must be at least 8 digits">
                            </p:inputText>
                        </label>
                    </div>
                    <p:message for="contact" />

                    <!-- School -->
                    <div class="ui-g-12">
                        <label>
                            <p:selectOneMenu style="padding: 0%" required="true" id="school" value="#{registerBean.school}" 
                                             editable="true" placeholder="School" requiredMessage="School Required">
                                <f:selectItem itemLabel="NUS" itemValue="NUS" />
                                <f:selectItem itemLabel="NTU" itemValue="NTU" />
                                <f:selectItem itemLabel="SMU" itemValue="SMU" />
                            </p:selectOneMenu>
                        </label>
                    </div>
                    <p:message for="school" />

                    <!-- User Type -->
                    <div class="ui-g-12 chkbox-container">
                        <p:selectOneButton required="true" requiredMessage="User Type Required" styleClass="menuSelect" id="userType" value="#{registerBean.userType}">
                            <f:selectItem itemValue="1" itemLabel="STU" />
                            <f:selectItem itemValue="2" itemLabel="LEC" />
                            <f:selectItem itemValue="3" itemLabel="GUE" />
                        </p:selectOneButton>
                    </div>
                    <p:message for="userType" />

                    <!-- Username -->
                    <div class="ui-g-12">
                        <label>
                            <p:inputText styleClass="textInput" title="Username should be 6-12 alphanumeric without special characters"
                                         placeholder="Username"
                                         id="username" value="#{registerBean.username}" 
                                         required="true" requiredMessage="Username Required." 
                                         validatorMessage="Invalid format. Username must be between 6-12 letters/numbers. Special characters are not allowed.">
                                <f:validateRegex pattern="^[a-zA-Z0-9]{6,12}$" /> 
                            </p:inputText>
                        </label>
                    </div>
                    <p:message for="username" />

                    <!-- Password -->
                    <div class="ui-g-12">
                        <label>
                            <p:password styleClass="textInput" 
                                        placeholder="Password"
                                        title="Password should be 6-12 characters"
                                        id="password" value="#{registerBean.password}" 
                                        feedback="true"
                                        match="password1"
                                        validatorMessage="Invalid format or inconsistent passwords. Please enter again."
                                        required="true" requiredMessage="Password Required." />
                        </label>
                    </div>
                    <p:message for="password" />

                    <!-- Confirm Password -->
                    <div class="ui-g-12">
                        <label>
                            <p:password styleClass="textInput" 
                                        placeholder="Confirm Password"
                                        title="Password again"
                                        id="password1" value="#{registerBean.password1}" 
                                        feedback="true"
                                        validatorMessage="Passwords are not consistent. Please enter again."
                                        required="true" requiredMessage="Confirm Password Required" />
                        </label>
                    </div>
                    <p:message for="password1" />

                    <!-- T&C -->
                    <div class="ui-g-12">
                        <label>
                            <p:confirmDialog style="max-width: 40%; max-height:50%; overflow:auto"  widgetVar="termsdlg" global="true" showEffect="fade" hideEffect="fade" >
                                <h:outputText value="1. Terms:"/>
                                <br/>
                                <h:outputText value="By accessing the website, you are agreeing to be bound by these terms of service, all applicable laws and regulations, and agree that you are responsible for compliance with any applicable local laws. If you do not agree with any of these terms, you are prohibited from using or accessing this site. The materials contained in this website are protected by applicable copyright and trademark law." />
                                <br/><br/>
                                <h:outputText value="2. Disclaimer:"/>
                                <br/>
                                <h:outputText value="The materials on PRISM's website are provided on an 'as is' basis. PRISM makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."/>
                                <br/><br/>
                                <h:outputText value="3. Limitations"/>
                                <br/>
                                <h:outputText value="In no event shall PRISM or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on PRISM's website, even if PRISM or a PRISM authorized representative has been notified orally or in writing of the possibility of such damage. Because some jurisdictions do not allow limitations on implied warranties, or limitations of liability for consequential or incidental damages, these limitations may not apply to you."/>
                                <br/><br/>
                                <h:outputText value="4. Modifications"/>
                                <br/>
                                <h:outputText value="PRISM may revise these terms of service for its website at any time without notice. By using this website you are agreeing to be bound by the then current version of these terms of service."/>
                                <br/><br/>
                                <h:outputText value="5. Governing Law"/>
                                <br/>
                                <h:outputText value="These terms and conditions are governed by and construed in accordance with the laws of Singapore and you irrevocably submit to the exclusive jurisdiction of the courts in that State or location."/>
                            </p:confirmDialog>

                            <p:commandButton styleClass="termsBtn" ajax="false" value="Terms &amp; Conditions">
                                <p:confirm  message="Terms &amp; Conditions" icon="ui-icon-alert" />
                            </p:commandButton>

                            <h:panelGrid styleClass="form-title-row" columns="2" style="margin: auto">
                                <h:outputText value="I agree to the terms &amp; conditions"></h:outputText>
                                <p:selectBooleanCheckbox value="#{registerBean.agree}" id="terms" required="true" requiredMessage="You must agree to our Terms &amp; Conditions" >
                                </p:selectBooleanCheckbox>
                            </h:panelGrid>
                        </label>
                        <p:message for="terms"/>
                    </div>

                    <div class="ui-g-12 button-container">
                        <p:commandButton styleClass="pink-btn" icon="fa fa-user" update="@form" value="Sign Up" actionListener="#{registerBean.register}" action="login?faces-redirect=true" />
                        <!--
                        <p:button outcome="/resetPassword" value="Forgot Password" icon="fa fa-key" styleClass="blue-btn" />
                        -->
                    </div>
                </div>
            </h:form>
        </div>

        <h:outputStylesheet name="css/layout-#{guestPreferences.theme}.css" library="poseidon-layout" />
    </h:body>

</html>

